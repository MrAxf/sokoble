import{R as d,a as f,b as c,c as m,r as u,j as l,m as y,d as x}from"./index.0bf4adcd.js";const b=d({key:"sokobanBoard",default:{board:[["FREE","FREE","FREE","FREE","FREE","FREE","BLOCK"],["FREE","FREE","FREE","FREE","FREE","FREE","FREE"]],player:{x:0,y:0},boxes:[{x:1,y:0}]}}),p=f({key:"sokobanMeta",get:({get:o})=>{var a;const e=o(b),r=Math.max(e.board.length,(a=e.board[0])==null?void 0:a.length),n=(r-e.board.length)/2,t=(r-e.board[0].length)/2,s={top:1+Math.floor(n),bottom:1+Math.ceil(n),left:1+Math.floor(t),right:1+Math.ceil(t)};return{size:r,squarePercent:100/(r+2),walls:s}}}),E=b,g=d({key:"sokobanPlayer",default:{x:0,y:0}}),h=g;function w(){const o=c(p),e=c(E),[r,n]=m(h);return u.exports.useEffect(()=>{const t=s=>{const a={...r};switch(s.key){case"ArrowUp":a.y=a.y-1;break;case"ArrowDown":a.y=a.y+1;break;case"ArrowLeft":a.x=a.x-1;break;case"ArrowRight":a.x=a.x+1;break}const i=e.board[a.y][a.x];i&&i!=="BLOCK"&&n(a)};return globalThis.document.addEventListener("keydown",t),()=>{globalThis.document.removeEventListener("keydown",t)}},[e,r]),l(y.div,{className:"absolute aspect-square rounded-full bg-yellow-600",style:{width:`${o.squarePercent}%`},animate:{left:`${(o.walls.left+r.x)*o.squarePercent}%`,top:`${(o.walls.top+r.y)*o.squarePercent}%`}})}function R(){const o=c(E),e=c(p),r=(t,s)=>({BLOCK:l("div",{className:"bg-purple-900 aspect-square"},s),FREE:l("div",{className:"bg-purple-300 aspect-square"},s),BUTTON:l("div",{className:"bg-purple-50 aspect-square"},s)})[t],n=u.exports.useCallback(()=>{if(!e.size)return null;let t=0;return[...Array(e.walls.top*(e.size+2)).fill("").map(()=>r("BLOCK",String(t++))),...o.board.map(s=>[...Array(e.walls.left).fill("").map(()=>r("BLOCK",String(t++))),...s.map(a=>r(a,String(t++))),...Array(e.walls.right).fill("").map(()=>r("BLOCK",String(t++)))]).flat(),...Array(e.walls.bottom*(e.size+2)).fill("").map(()=>r("BLOCK",String(t++)))]},[o]);return x("div",{role:"grid",className:"grid w-full aspect-square rounded-xl border-4 border-violet-600 max-w-full max-h-full relative",style:{gridTemplateColumns:`repeat(${(e.size||0)+2}, 1fr)`},children:[n(),l(w,{})]})}function F(){return l("div",{className:"p-5",children:l(R,{})})}export{F as default};
